<div class="row m-2 mt-4">
    <div class="col-4">
        <div class="card" style="width: 18rem;height:20rem">
            <div class="card-body ">
                <h5 class="card-title text-center">UPS Temparature</h5>
                <hr class="bg-success"></hr>
                <div class="row">
                    <div class="col-4">
                        <button type="button" class="btn btn-outline-success ">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-thermometer-half" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M6 2a2 2 0 1 1 4 0v7.627a3.5 3.5 0 1 1-4 0V2zm2-1a1 1 0 0 0-1 1v7.901a.5.5 0 0 1-.25.433A2.499 2.499 0 0 0 8 15a2.5 2.5 0 0 0 1.25-4.666.5.5 0 0 1-.25-.433V2a1 1 0 0 0-1-1z"/>
                                <path d="M8.25 2a.25.25 0 0 0-.5 0v9.02a1.514 1.514 0 0 1 .5 0V2z"/>
                                <path d="M9.5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-8">
                        <p>Current temp is <span id="ups_current_temp"></span></p>
                        <a href="#" class="card-link">Farenheat</a>
                    </div>
                </div>
                <p class="card-text text-success">Station temp is Normal</p>
                <a class="btn btn-success disabled">Normal</a>
                <hr/>
                <a href="#" class="card-link">Archive</a>
                
            </div>
        </div>
    </div>
    <div class="col-4">
        <div class="card" style="width: 18rem;height:20rem">
            <div class="card-body ">
                <h5 class="card-title text-center">Room Temparature</h5>
                <hr class="bg-success"></hr>
                <div class="row">
                    <div class="col-4">
                        <button type="button" class="btn btn-outline-primary ">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-thermometer-half" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M6 2a2 2 0 1 1 4 0v7.627a3.5 3.5 0 1 1-4 0V2zm2-1a1 1 0 0 0-1 1v7.901a.5.5 0 0 1-.25.433A2.499 2.499 0 0 0 8 15a2.5 2.5 0 0 0 1.25-4.666.5.5 0 0 1-.25-.433V2a1 1 0 0 0-1-1z"/>
                                <path d="M8.25 2a.25.25 0 0 0-.5 0v9.02a1.514 1.514 0 0 1 .5 0V2z"/>
                                <path d="M9.5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-8">
                        <p>Current temp is 23 <sup>o</sup>C</p>
                        <a href="#" class="card-link">Farenheat</a>
                    </div>
                </div>
                <p class="card-text text-success">Station temp is Normal</p>
                <a class="btn btn-success disabled">No Alarms</a>
                <hr/>
                <a href="#" class="card-link">Archive</a>
            </div>
        </div>
    </div>
    <div class="col-4">
        <div class="card" style="width: 18rem; height:20rem">
            <div class="card-body ">
                <h5 class="card-title text-center">UPS Status</h5>
                <hr class="bg-success"></hr>
                <div class="row">
                    <div class="col-12">
                        <button type="button" class="btn btn-outline-success" id="ups_status_icon">
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lightning-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"/>
                            </svg>
                        </button>
                        
                    </div>
                </div>
                <p class="card-text text-success" id="ups_status_text">UPS Running Normal</p>
                <a class="btn btn-success disabled" id="ups_status_ack_btn">No Alarms</a>
                <hr/>
                <a href="#" class="card-link">Archive</a>
            </div>
        </div>
    </div>
</div>
<a class="btn btn-success" id="socket_call" >Socket</a>



<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
  $(function () {
    var socket = io();
    socket.on("chat message",(msg)=>{
        console.log(msg)
    })
    socket.on("UPS ALARM",(msg)=>{
        $('#ups_status_icon').removeClass("btn-outline-success").addClass('btn-outline-danger');
        $('#ups_status_text').removeClass("text-success").addClass("text-danger").text("UPS in Alarm")
        $('#ups_status_ack_btn').removeClass("btn-success").removeClass("disabled").addClass("btn-danger").text("Acknowledge Alarm");
    }),
    socket.on('ACKNOWLEDGED', ()=>{
        $('#ups_status_icon').removeClass("btn-outline-danger").addClass('btn-outline-warning');
        $('#ups_status_text').removeClass("text-danger").addClass("text-warning").text("UPS Alarm Acknowledged")
        $('#ups_status_ack_btn').removeClass("btn-danger").addClass("btn-warning").text("Reset Alarm");
    })
   
    socket.on('RESETTED', ()=>{
        $('#ups_status_icon').removeClass("btn-outline-warning").addClass('btn-outline-success');
        $('#ups_status_text').removeClass("text-warning").addClass("text-success").text("UPS Running Normal")
        $('#ups_status_ack_btn').removeClass("btn-warning").addClass("btn-success").text("No Alarms");
    });
    socket.on('UPS_TEMP',(message)=>{
        $('#ups_current_temp').text(message);
    })
    $('#ups_status_ack_btn').click(()=>{
        if($('#ups_status_ack_btn').hasClass("btn-danger")){
            console.log("emit ack")
            socket.emit("ACKNOWLEDGE");
        }else if($('#ups_status_ack_btn').hasClass("btn-warning")){
            console.log("emit reset")
            socket.emit("RESET");
        }
    });
    $("#socket_call").click(()=>{
        console.log("PI_COV_Emitted")
        socket.emit("PI_COV");
    })
    
  });
</script>
